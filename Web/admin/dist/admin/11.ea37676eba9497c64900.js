(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{DSZy:function(t,e,i){"use strict";i.r(e),i.d(e,"ProgramsModule",function(){return ht});var a=i("ofXK"),o=i("tyNb"),r=i("mrSG"),n=i("3Pt+"),c=i("M9IT"),s=i("+0xr"),b=i("JX91"),l=i("lJxs"),u=i("QC9C"),m=i("cyHM"),d=i("0IaG"),h=i("7Cbv"),p=i("FtGj"),f=i("fXoL"),g=i("Vaw3"),U=i("jhN1"),V=i("F11b"),y=i("JqCM"),C=i("I/3d"),v=i("xHqg"),D=i("kmnG"),O=i("qFsG"),k=i("iadO"),w=i("bTqV"),B=i("NFeN"),I=i("d3UM"),P=i("FKr1"),N=i("A5z7");function F(t,e){1&t&&f.Bc(0,"Challenges")}function S(t,e){if(1&t&&f.Qb(0,"img",28),2&t){const t=f.gc();f.lc("src",t.sanitizedImagePath(t.f.imageUrl.value),f.vc)}}function _(t,e){if(1&t&&f.Qb(0,"img",28),2&t){const t=f.gc().index,e=f.gc();f.lc("src",e.sanitizedImagePath(e.phases.value[t].thumbnail),f.vc)}}function W(t,e){if(1&t&&(f.Vb(0,"mat-option",43),f.Bc(1),f.Ub()),2&t){const t=e.$implicit;f.lc("value",t.id),f.Db(1),f.Cc(t.title)}}function x(t,e){1&t&&(f.Vb(0,"p"),f.Bc(1,"No record found.."),f.Ub())}function A(t,e){if(1&t){const t=f.Wb();f.Vb(0,"div"),f.Vb(1,"div",29),f.Vb(2,"span"),f.Bc(3),f.Vb(4,"button",22),f.cc("click",function(){f.tc(t);const i=e.index;return f.gc().removePhase(i)}),f.Vb(5,"mat-icon"),f.Bc(6,"remove_circle"),f.Ub(),f.Ub(),f.Ub(),f.Vb(7,"div",30),f.Ac(8,_,1,1,"img",4),f.Vb(9,"div"),f.Vb(10,"input",5),f.cc("change",function(i){f.tc(t);const a=e.index;return f.gc().onFileChange2(i,a)}),f.Ub(),f.Ub(),f.Ub(),f.Vb(11,"mat-form-field",6),f.Vb(12,"mat-label"),f.Bc(13,"Display Name"),f.Ub(),f.Qb(14,"input",31),f.Ub(),f.Vb(15,"mat-form-field",6),f.Vb(16,"mat-label"),f.Bc(17,"Name"),f.Ub(),f.Qb(18,"input",32),f.Ub(),f.Vb(19,"mat-form-field",6),f.Vb(20,"mat-label"),f.Bc(21,"Description"),f.Ub(),f.Qb(22,"input",33),f.Ub(),f.Vb(23,"mat-form-field",6),f.Vb(24,"mat-label"),f.Bc(25,"Start Day"),f.Ub(),f.Qb(26,"input",34),f.Ub(),f.Vb(27,"mat-form-field",6),f.Vb(28,"mat-label"),f.Bc(29,"End Day"),f.Ub(),f.Qb(30,"input",35),f.Ub(),f.Vb(31,"mat-form-field",6),f.Vb(32,"mat-label"),f.Bc(33,"PDF URL"),f.Ub(),f.Qb(34,"input",36),f.Ub(),f.Vb(35,"div"),f.Vb(36,"span"),f.Vb(37,"h3"),f.Bc(38,"Meals"),f.Ub(),f.Ub(),f.Vb(39,"mat-form-field",6),f.Vb(40,"mat-select",37),f.cc("openedChange",function(e){return f.tc(t),f.gc().openedChange(e)}),f.Vb(41,"mat-form-field",38),f.Vb(42,"mat-label"),f.Bc(43,"Search"),f.Ub(),f.Qb(44,"input",39),f.Vb(45,"mat-icon",40),f.Bc(46,"search"),f.Ub(),f.Ub(),f.Ac(47,W,2,2,"mat-option",41),f.Ac(48,x,2,0,"p",42),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Ub()}if(2&t){const t=e.index,i=f.gc();f.Db(1),f.lc("formGroupName",t),f.Db(2),f.Dc("Phase ",t+1," "),f.Db(5),f.lc("ngIf",i.phases.value[t].thumbnail),f.Db(36),f.lc("formControl",i.selectedItem),f.Db(3),f.lc("ngForOf",i.recipeList),f.Db(1),f.lc("ngIf",0===i.recipeList.length)}}function j(t,e){if(1&t&&(f.Vb(0,"mat-option",43),f.Bc(1),f.Ub()),2&t){const t=e.$implicit;f.lc("value",t.id),f.Db(1),f.Cc(t.displayName)}}function L(t,e){1&t&&(f.Vb(0,"p"),f.Bc(1,"No record found.."),f.Ub())}function R(t,e){1&t&&(f.Vb(0,"mat-icon",52),f.Bc(1,"cancel"),f.Ub())}function q(t,e){if(1&t){const t=f.Wb();f.Vb(0,"mat-chip",50),f.cc("removed",function(){f.tc(t);const i=e.$implicit,a=f.gc().index;return f.gc().removeDay(i,a)}),f.Bc(1),f.Ac(2,R,2,0,"mat-icon",51),f.Ub()}if(2&t){const t=e.$implicit,i=f.gc(2);f.lc("selectable",i.selectable)("removable",i.removable),f.Db(1),f.Dc(" ",t," "),f.Db(1),f.lc("ngIf",i.removable)}}function M(t,e){if(1&t){const t=f.Wb();f.Vb(0,"div"),f.Vb(1,"div",29),f.Vb(2,"span"),f.Bc(3),f.Vb(4,"button",22),f.cc("click",function(){f.tc(t);const i=e.index;return f.gc().removeWorkout(i)}),f.Vb(5,"mat-icon"),f.Bc(6,"remove_circle"),f.Ub(),f.Ub(),f.Ub(),f.Vb(7,"mat-form-field",6),f.Vb(8,"mat-label"),f.Bc(9,"Select workout"),f.Ub(),f.Vb(10,"mat-select",44),f.cc("openedChange",function(e){return f.tc(t),f.gc().openedChange(e)}),f.Vb(11,"mat-form-field",38),f.Vb(12,"mat-label"),f.Bc(13,"Search"),f.Ub(),f.Qb(14,"input",39),f.Vb(15,"mat-icon",40),f.Bc(16,"search"),f.Ub(),f.Ub(),f.Ac(17,j,2,2,"mat-option",41),f.Ac(18,L,2,0,"p",42),f.Ub(),f.Ub(),f.Vb(19,"div"),f.Vb(20,"mat-form-field",45),f.Vb(21,"mat-label"),f.Bc(22,"Days"),f.Ub(),f.Vb(23,"mat-chip-list",46,47),f.Ac(25,q,3,4,"mat-chip",48),f.Vb(26,"input",49),f.cc("matChipInputTokenEnd",function(i){f.tc(t);const a=e.index;return f.gc().addDay(i,a)}),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Ub()}if(2&t){const t=e.index,i=f.rc(24),a=f.gc();f.Db(1),f.lc("formGroupName",t),f.Db(2),f.Dc("Workout ",t+1," "),f.Db(11),f.lc("formControl",a.selectedItemWorkouts),f.Db(3),f.lc("ngForOf",a.workoutList),f.Db(1),f.lc("ngIf",0===a.workoutList.length),f.Db(7),f.lc("ngForOf",a.getDays(t)),f.Db(1),f.lc("matChipInputFor",i)("matChipInputSeparatorKeyCodes",a.separatorKeysCodes)("matChipInputAddOnBlur",a.addOnBlur)}}function Q(t,e){1&t&&f.Bc(0,"Done")}let T=(()=>{class t{constructor(t,e,i,a,o,r,c,s,b,l){this.fb=t,this.afStorage=e,this.sanitizer=i,this.http=a,this.spinner=o,this.dialog=r,this._formBuilder=c,this.db=s,this.data=b,this.dialogRef=l,this.visible=!0,this.selectable=!0,this.removable=!0,this.addOnBlur=!0,this.separatorKeysCodes=[p.g,p.c],this.recipeList=[],this.workoutList=[],this.searchOptions=[],this.selectedItem=new n.e,this.searchOptionsWorkouts=[],this.selectedItemWorkouts=new n.e,this.objectComparisonFunction=function(t,e){return t.id===e.id};const u=this.data;this.Form=this._formBuilder.group({id:u&&u.id?u.id:Object(h.a)(),displayName:[u&&u.displayName?u.displayName:"",n.u.required],name:[u&&u.name?u.name:"",n.u.required],availabilityDate:[u&&u.availabilityDate?u.availabilityDate:"",n.u.required],imageUrl:[u&&u.imageUrl?u.imageUrl:"",n.u.required],numberOfDays:[u&&u.numberOfDays?u.numberOfDays:"",n.u.required],numberOfWeeks:[u&&u.numberOfWeeks?u.numberOfWeeks:"",n.u.required],productReChargeId:[u&&u.productReChargeId?u.productReChargeId:"",n.u.required],shopifyProductId:[u&&u.shopifyProductId?u.shopifyProductId:"",n.u.required],shopifyUrl:[u&&u.shopifyUrl?u.shopifyUrl:"",n.u.required],tag:[u&&u.tag?u.tag:"",n.u.required]}),this.Form2=this._formBuilder.group({phases:this.fb.array(u&&u.phases?u.phases.map(t=>this.newPhase(t)):[])}),this.Form3=this._formBuilder.group({workouts:this.fb.array(u&&u.workouts?u.workouts.map(t=>this.newWorkouts(t)):[])})}ngOnInit(){this.getRecipe(),this.getWorkout(),this.applySearch(),this.applySearchWorkouts()}ngOnDestroy(){this.unsubRecipe(),this.unsubWorkout()}get f(){return this.Form.controls}get phases(){return this.Form2.get("phases")}newPhase(t=null){return this.fb.group({displayName:[t&&t.displayName?t.displayName:"",n.u.required],name:[t&&t.name?t.name:"",n.u.required],thumbnail:[t&&t.thumbnail?t.thumbnail:"",n.u.required],description:[t&&t.description?t.description:"",n.u.required],startDay:[t&&t.startDay?t.startDay:"",n.u.required],endDay:[t&&t.endDay?t.endDay:"",n.u.required],pdfUrl:[t&&t.pdfUrl?t.pdfUrl:"",n.u.required],meals:[t&&t.meals?t.meals:"",n.u.required]})}newWorkouts(t=null){return this.fb.group({workoutId:[t&&t.workoutId?t.workoutId:"",n.u.required],days:[t&&t.days?t.days:[],n.u.required]})}addPhase(){this.phases.push(this.newPhase())}removePhase(t){this.phases.removeAt(t)}get workouts(){return this.Form3.get("workouts")}addWorkout(){this.workouts.push(this.newWorkouts())}removeWorkout(t){this.workouts.removeAt(t)}addDay(t,e){const i=t.input,a=t.value;if((a||"").trim()){var o=this.workouts.at(e).get("days");let t=o.value;t.push(Number(a.trim())),o.patchValue(t)}i&&(i.value="")}removeDay(t,e){var i=this.workouts.at(e).get("days");let a=i.value;const o=a.indexOf(t);o>=0&&(a.splice(o,1),i.patchValue(a))}getDays(t){return this.workouts.at(t).get("days").value}sanitizedImagePath(t){if("object"==typeof t){let e=URL.createObjectURL(t);return this.sanitizer.bypassSecurityTrustUrl(e)}return t}onFileChange(t){return Object(r.a)(this,void 0,void 0,function*(){const e=new FileReader;if(t.target.files&&t.target.files.length){const[i]=t.target.files;e.readAsDataURL(i),e.onload=()=>Object(r.a)(this,void 0,void 0,function*(){const t=yield fetch(e.result);yield t.blob().then(t=>{this.Form.patchValue({imageUrl:t})})})}})}onFileChange2(t,e){return Object(r.a)(this,void 0,void 0,function*(){const i=new FileReader;if(t.target.files&&t.target.files.length){const[a]=t.target.files;i.readAsDataURL(a),i.onload=()=>Object(r.a)(this,void 0,void 0,function*(){const t=yield fetch(i.result);yield t.blob().then(t=>{this.phases.at(e).patchValue({thumbnail:t})})})}})}onSubmit(){this.spinner.show(),this.upload()}upload(){return Object(r.a)(this,void 0,void 0,function*(){let t=[{image:this.Form.value.imageUrl}];this.Form2.value.phases.forEach(e=>{t.push({image:e.thumbnail})}),Promise.all(t.map((t,e)=>Object(r.a)(this,void 0,void 0,function*(){return new Promise((i,a)=>Object(r.a)(this,void 0,void 0,function*(){if("object"==typeof t.image){const o=this.afStorage.ref(`Programs/${this.Form.value.id}/${0===e?"imageUrl":"phase"+e}`).put(t.image);this.uploadProgress=o.percentageChanges(),(yield o).ref.getDownloadURL().then(t=>{0===e?this.Form.patchValue({imageUrl:t}):this.phases.at(e-1).patchValue({thumbnail:t}),setTimeout(i,0,"success")}).catch(t=>{console.log("Error in uploading",t),setTimeout(a,0,"failed")})}else setTimeout(i,0,"success")}))}))).then(t=>{console.log(t,"then"),this.saveData()}).catch(t=>console.log("Error!",t))})}saveData(){console.log(this.Form.value);const t=Object.assign(Object.assign(Object.assign({},this.Form.value),this.Form2.value),this.Form3.value);this.http.addEditProgram(t).subscribe(t=>{t.success&&this.dialog.open(m.a,{data:{title:"Updated!",subTitle:"Program updated successfully."}}),this.dialogRef.close(),this.spinner.hide()},t=>{console.log("HTTP Error",t),this.spinner.hide(),alert("Something went wrong,please try again")})}getRecipe(){return Object(r.a)(this,void 0,void 0,function*(){const t=this.db.firestore.collection("Recipes");this.unsubRecipe=yield t.onSnapshot(t=>{var e=[];t.forEach(t=>{e.push(t.data())}),e.length>0&&(this.recipeList=this.searchOptions=e)},t=>{console.log("erroe",t)})})}getWorkout(){return Object(r.a)(this,void 0,void 0,function*(){const t=this.db.firestore.collection("Workouts");this.unsubWorkout=yield t.onSnapshot(t=>{var e=[];t.forEach(t=>{e.push(t.data())}),e.length>0&&(this.workoutList=this.searchOptionsWorkouts=e)},t=>{console.log("error",t)})})}applySearch(){this.filteredOptions=this.selectedItem.valueChanges.pipe(Object(b.a)(""),Object(l.a)(t=>"string"==typeof t?t:t.title),Object(l.a)(t=>t?this._filter(t):this.searchOptions.slice())),this.filteredOptions.subscribe(t=>{this.recipeList=t})}_filter(t){const e=t.toLowerCase();return this.searchOptions.filter(t=>0===t.title.toLowerCase().indexOf(e))}applySearchWorkouts(){this.filteredOptionsWorkouts=this.selectedItemWorkouts.valueChanges.pipe(Object(b.a)(""),Object(l.a)(t=>"string"==typeof t?t:t.displayName),Object(l.a)(t=>t?this.__filter(t):this.searchOptionsWorkouts.slice())),this.filteredOptionsWorkouts.subscribe(t=>{this.workoutList=t})}__filter(t){const e=t.toLowerCase();return this.searchOptionsWorkouts.filter(t=>0===t.displayName.toLowerCase().indexOf(e))}openedChange(t){t||(this.selectedItem.patchValue(""),this.selectedItemWorkouts.patchValue(""))}}return t.\u0275fac=function(e){return new(e||t)(f.Pb(n.d),f.Pb(g.a),f.Pb(U.b),f.Pb(V.a),f.Pb(y.c),f.Pb(d.b),f.Pb(n.d),f.Pb(C.a),f.Pb(d.a),f.Pb(d.g))},t.\u0275cmp=f.Jb({type:t,selectors:[["app-edit"]],decls:92,vars:12,consts:[["stepper",""],[3,"stepControl"],[3,"formGroup"],["matStepLabel",""],["class","coverImage",3,"src",4,"ngIf"],["type","file","accept",".png,.jpg",3,"change"],["appearance","outline"],["matInput","","formControlName","availabilityDate",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["matInput","","formControlName","displayName","required",""],["matInput","","formControlName","name","required",""],["matInput","","type","number","formControlName","numberOfDays","required",""],["matInput","","type","number","formControlName","numberOfWeeks","required",""],["matInput","","formControlName","productReChargeId","required",""],["matInput","","formControlName","shopifyProductId","required",""],["matInput","","formControlName","shopifyUrl","required",""],["matInput","","formControlName","tag","required",""],[2,"float","right"],["mat-button","","matStepperNext",""],["label","Phases",3,"stepControl"],["formArrayName","phases"],["mat-icon-button","","color","primary",3,"click"],[4,"ngFor","ngForOf"],["mat-button","","matStepperPrevious",""],["label","Workouts",3,"stepControl"],["formArrayName","workouts"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"coverImage",3,"src"],[1,"group",3,"formGroupName"],[1,"imgContainer"],["matInput","","formControlName","displayName"],["matInput","","formControlName","name"],["matInput","","formControlName","description"],["matInput","","type","number","formControlName","startDay"],["matInput","","type","number","formControlName","endDay"],["matInput","","formControlName","pdfUrl"],["formControlName","meals","multiple","",3,"openedChange"],["appearance","outline",1,"searchContainer"],["type","text","matInput","",3,"formControl"],["matPrefix","","color","primary"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value"],["formControlName","workoutId",3,"openedChange"],["appearance","outline",1,"example-chip-list"],["aria-label","Days selection"],["chipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],["placeholder","New day...","type","number",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],[3,"selectable","removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""]],template:function(t,e){if(1&t&&(f.Vb(0,"mat-horizontal-stepper",null,0),f.Vb(2,"mat-step",1),f.Vb(3,"form",2),f.Ac(4,F,1,0,"ng-template",3),f.Vb(5,"div"),f.Vb(6,"h4"),f.Bc(7,"Cover Image"),f.Ub(),f.Ac(8,S,1,1,"img",4),f.Vb(9,"div"),f.Vb(10,"input",5),f.cc("change",function(t){return e.onFileChange(t)}),f.Ub(),f.Ub(),f.Ub(),f.Vb(11,"mat-form-field",6),f.Vb(12,"mat-label"),f.Bc(13,"Choose a date"),f.Ub(),f.Qb(14,"input",7),f.Qb(15,"mat-datepicker-toggle",8),f.Qb(16,"mat-datepicker",null,9),f.Ub(),f.Vb(18,"mat-form-field",6),f.Vb(19,"mat-label"),f.Bc(20,"Display Name"),f.Ub(),f.Qb(21,"input",10),f.Ub(),f.Vb(22,"mat-form-field",6),f.Vb(23,"mat-label"),f.Bc(24,"Name"),f.Ub(),f.Qb(25,"input",11),f.Ub(),f.Vb(26,"mat-form-field",6),f.Vb(27,"mat-label"),f.Bc(28,"Number of Days"),f.Ub(),f.Qb(29,"input",12),f.Ub(),f.Vb(30,"mat-form-field",6),f.Vb(31,"mat-label"),f.Bc(32,"Number of Weeks"),f.Ub(),f.Qb(33,"input",13),f.Ub(),f.Vb(34,"mat-form-field",6),f.Vb(35,"mat-label"),f.Bc(36,"Product Recharge ID :"),f.Ub(),f.Qb(37,"input",14),f.Ub(),f.Vb(38,"mat-form-field",6),f.Vb(39,"mat-label"),f.Bc(40,"Shopify Poduct ID :"),f.Ub(),f.Qb(41,"input",15),f.Ub(),f.Vb(42,"mat-form-field",6),f.Vb(43,"mat-label"),f.Bc(44,"Shopify URL :"),f.Ub(),f.Qb(45,"input",16),f.Ub(),f.Vb(46,"mat-form-field",6),f.Vb(47,"mat-label"),f.Bc(48,"Tag :"),f.Ub(),f.Qb(49,"input",17),f.Ub(),f.Vb(50,"div",18),f.Vb(51,"button",19),f.Bc(52,"Next"),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Vb(53,"mat-step",20),f.Vb(54,"form",2),f.Vb(55,"div",21),f.Vb(56,"span"),f.Vb(57,"h3"),f.Bc(58,"Phases:"),f.Ub(),f.Vb(59,"button",22),f.cc("click",function(){return e.addPhase()}),f.Vb(60,"mat-icon"),f.Bc(61,"add_circle"),f.Ub(),f.Ub(),f.Ub(),f.Ac(62,A,49,6,"div",23),f.Ub(),f.Vb(63,"div",18),f.Vb(64,"button",24),f.Bc(65,"Back"),f.Ub(),f.Vb(66,"button",19),f.Bc(67,"Next"),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Vb(68,"mat-step",25),f.Vb(69,"form",2),f.Vb(70,"div",26),f.Vb(71,"span"),f.Vb(72,"h3"),f.Bc(73,"Workouts :"),f.Ub(),f.Vb(74,"button",22),f.cc("click",function(){return e.addWorkout()}),f.Vb(75,"mat-icon"),f.Bc(76,"add_circle"),f.Ub(),f.Ub(),f.Ub(),f.Ac(77,M,27,9,"div",23),f.Ub(),f.Vb(78,"div",18),f.Vb(79,"button",24),f.Bc(80,"Back"),f.Ub(),f.Vb(81,"button",19),f.Bc(82,"Next"),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Vb(83,"mat-step"),f.Ac(84,Q,1,0,"ng-template",3),f.Vb(85,"p"),f.Bc(86,"You are now done."),f.Ub(),f.Vb(87,"div"),f.Vb(88,"button",24),f.Bc(89,"Back"),f.Ub(),f.Vb(90,"button",27),f.cc("click",function(){return e.onSubmit()}),f.Bc(91,"Submit"),f.Ub(),f.Ub(),f.Ub(),f.Ub()),2&t){const t=f.rc(17);f.Db(2),f.lc("stepControl",e.Form),f.Db(1),f.lc("formGroup",e.Form),f.Db(5),f.lc("ngIf",e.f.imageUrl.valid),f.Db(6),f.lc("matDatepicker",t),f.Db(1),f.lc("for",t),f.Db(38),f.lc("stepControl",e.Form2),f.Db(1),f.lc("formGroup",e.Form2),f.Db(8),f.lc("ngForOf",e.phases.controls),f.Db(6),f.lc("stepControl",e.Form3),f.Db(1),f.lc("formGroup",e.Form3),f.Db(8),f.lc("ngForOf",e.workouts.controls),f.Db(13),f.lc("disabled",!(e.Form.valid&&e.Form2.valid&&e.Form3.valid))}},directives:[v.a,v.b,n.v,n.o,n.h,v.c,a.k,D.b,D.f,O.b,n.b,k.b,n.n,n.g,k.d,D.h,k.a,n.t,n.r,w.a,v.e,n.c,B.a,a.j,v.f,n.i,I.a,n.f,D.g,P.k,N.c,N.b,N.a,N.d],styles:[".group[_ngcontent-%COMP%]{display:block;margin:10px}.example-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}span[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}h3[_ngcontent-%COMP%]{margin:0}.imgContainer[_ngcontent-%COMP%]{margin-bottom:.5rem}.mat-dialog-container[_ngcontent-%COMP%]{width:100vw!important}.mat-stepper-horizontal[_ngcontent-%COMP%]{margin-top:8px}.mat-form-field[_ngcontent-%COMP%]{display:flex;flex-direction:column}.coverImage[_ngcontent-%COMP%]{height:10rem;width:10rem;background:#c5c0c0;border-radius:5px;object-fit:contain}"]}),t})();var $=i("wZkO"),E=i("MutI");function z(t,e){if(1&t&&(f.Vb(0,"mat-list-item",16),f.Bc(1),f.Ub()),2&t){const t=e.$implicit,i=f.gc(2);f.Db(1),f.Dc("\u2022 ",i._filter(t),"")}}function G(t,e){if(1&t&&(f.Vb(0,"mat-tab",13),f.Vb(1,"h3"),f.Bc(2),f.Ub(),f.Qb(3,"img",4),f.Vb(4,"p"),f.Bc(5),f.Ub(),f.Vb(6,"h3",5),f.Bc(7,"Start day :"),f.Ub(),f.Vb(8,"p"),f.Bc(9),f.Ub(),f.Vb(10,"h3",5),f.Bc(11,"End day :"),f.Ub(),f.Vb(12,"p"),f.Bc(13),f.Ub(),f.Vb(14,"h3",5),f.Bc(15,"Description :"),f.Ub(),f.Vb(16,"p"),f.Bc(17),f.Ub(),f.Vb(18,"h3",5),f.Bc(19,"Pdf url :"),f.Ub(),f.Vb(20,"p"),f.Vb(21,"a",6),f.Bc(22),f.Ub(),f.Ub(),f.Vb(23,"h3",5),f.Bc(24,"Meals :"),f.Ub(),f.Vb(25,"mat-list",14),f.Ac(26,z,2,1,"mat-list-item",15),f.Ub(),f.Ub()),2&t){const t=e.$implicit,i=f.gc();f.lc("label",t.displayName),f.Db(2),f.Cc(t.displayName),f.Db(1),f.lc("src",t.thumbnail,f.vc),f.Db(2),f.Cc(t.name),f.Db(4),f.Cc(t.startDay),f.Db(4),f.Cc(t.endDay),f.Db(4),f.Cc(t.description),f.Db(4),f.lc("href",i.data.shopifyUrl,f.vc),f.Db(1),f.Cc(t.pdfUrl),f.Db(4),f.lc("ngForOf",t.meals)}}function J(t,e){if(1&t&&(f.Vb(0,"h3"),f.Bc(1),f.Ub()),2&t){const t=f.gc().$implicit,e=f.gc();f.Db(1),f.Cc(e.__filter(t.workoutId))}}function H(t,e){1&t&&(f.Vb(0,"h3"),f.Bc(1,"Rest"),f.Ub())}function K(t,e){if(1&t&&(f.Vb(0,"div",17),f.Ac(1,J,2,1,"h3",18),f.Ac(2,H,2,0,"h3",18),f.Vb(3,"h3",5),f.Bc(4,"Days :"),f.Ub(),f.Vb(5,"p"),f.Bc(6),f.Ub(),f.Ub()),2&t){const t=e.$implicit,i=f.gc();f.Db(1),f.lc("ngIf","rest"!==t.target&&i.workoutList.length>0),f.Db(1),f.lc("ngIf","rest"===t.target),f.Db(4),f.Cc(t.days)}}let X=(()=>{class t{constructor(t,e){this.data=t,this.db=e,this.recipeList=[],this.workoutList=[],this.getRecipe(),this.getWorkout()}ngOnInit(){}getRecipe(){return Object(r.a)(this,void 0,void 0,function*(){const t=this.db.firestore.collection("Recipes");this.unsubRecipe=yield t.onSnapshot(t=>{var e=[],i=[];this.data&&this.data.phases.forEach(t=>{i=[...i,...t.meals]}),t.forEach(t=>{i.includes(t.data().id)&&e.push(t.data())}),e.length>0&&(this.recipeList=e)},t=>{console.log("erroe",t)})})}_filter(t=""){let e=this.recipeList.filter(e=>e.id===t)[0];return e&&e.title?e.title:""}getWorkout(){return Object(r.a)(this,void 0,void 0,function*(){const t=this.db.firestore.collection("Workouts");this.unsubWorkout=yield t.onSnapshot(t=>{var e=[];t.forEach(t=>{this.data.workouts.find(e=>e.workoutId===t.data().id)&&e.push(t.data())}),e.length>0&&(this.workoutList=e)},t=>{console.log("erroe",t)})})}__filter(t=""){let e=this.workoutList.filter(e=>e.id===t)[0];return e&&e.displayName?e.displayName:""}ngOnDestroy(){this.unsubRecipe(),this.unsubWorkout()}}return t.\u0275fac=function(e){return new(e||t)(f.Pb(d.a),f.Pb(C.a))},t.\u0275cmp=f.Jb({type:t,selectors:[["app-view"]],decls:37,vars:11,consts:[["mat-dialog-title",""],["mat-dialog-subTitle",""],[1,"mat-typography"],["label","Program Details"],[1,"coverImage",3,"src"],[1,"heading"],[3,"href"],["label","Phases"],[3,"label",4,"ngFor","ngForOf"],["label","Workouts"],["style","border-bottom: 1px solid lightgray;",4,"ngFor","ngForOf"],["align","end"],["mat-button","","mat-dialog-close",""],[3,"label"],["role","list"],["role","listitem",4,"ngFor","ngForOf"],["role","listitem"],[2,"border-bottom","1px solid lightgray"],[4,"ngIf"]],template:function(t,e){1&t&&(f.Vb(0,"h2",0),f.Bc(1),f.Ub(),f.Vb(2,"h3",1),f.Bc(3),f.Ub(),f.Vb(4,"mat-dialog-content",2),f.Vb(5,"mat-tab-group"),f.Vb(6,"mat-tab",3),f.Qb(7,"img",4),f.Vb(8,"h3",5),f.Bc(9,"No of days :"),f.Ub(),f.Vb(10,"p"),f.Bc(11),f.Ub(),f.Vb(12,"h3",5),f.Bc(13,"No of weeks:"),f.Ub(),f.Vb(14,"p"),f.Bc(15),f.Ub(),f.Vb(16,"h3",5),f.Bc(17,"Shopify product id :"),f.Ub(),f.Vb(18,"p"),f.Bc(19),f.Ub(),f.Vb(20,"h3",5),f.Bc(21,"Product recharge id :"),f.Ub(),f.Vb(22,"p"),f.Bc(23),f.Ub(),f.Vb(24,"h3",5),f.Bc(25,"Shopify url :"),f.Ub(),f.Vb(26,"p"),f.Vb(27,"a",6),f.Bc(28),f.Ub(),f.Ub(),f.Ub(),f.Vb(29,"mat-tab",7),f.Vb(30,"mat-tab-group"),f.Ac(31,G,27,10,"mat-tab",8),f.Ub(),f.Ub(),f.Vb(32,"mat-tab",9),f.Ac(33,K,7,3,"div",10),f.Ub(),f.Ub(),f.Ub(),f.Vb(34,"mat-dialog-actions",11),f.Vb(35,"button",12),f.Bc(36,"Cancel"),f.Ub(),f.Ub()),2&t&&(f.Db(1),f.Cc(e.data.displayName),f.Db(2),f.Cc(e.data.name),f.Db(4),f.lc("src",e.data.imageUrl,f.vc),f.Db(4),f.Cc(e.data.numberOfDays),f.Db(4),f.Cc(e.data.numberOfWeeks),f.Db(4),f.Cc(e.data.shopifyProductId),f.Db(4),f.Cc(e.data.productReChargeId),f.Db(4),f.lc("href",e.data.shopifyUrl,f.vc),f.Db(1),f.Cc(e.data.shopifyUrl),f.Db(3),f.lc("ngForOf",e.data.phases),f.Db(2),f.lc("ngForOf",e.data.workouts))},directives:[d.h,d.e,$.b,$.a,a.j,d.c,w.a,d.d,E.a,E.b,a.k],styles:[".mat-list-base[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%], .mat-list-base[_ngcontent-%COMP%]   .mat-list-option[_ngcontent-%COMP%]{display:block;-webkit-tap-highlight-color:transparent;width:100%;padding-bottom:.5rem;height:auto;font-size:.9rem}h4[_ngcontent-%COMP%]{margin:0}h4[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{padding-left:16px}video[_ngcontent-%COMP%]{margin-left:16px}.stepTitleContainer[_ngcontent-%COMP%]{display:flex;align-items:baseline}.coverImage[_ngcontent-%COMP%]{height:10rem;width:10rem;margin-top:.5rem;object-fit:contain}.coverImage[_ngcontent-%COMP%], .stepImage[_ngcontent-%COMP%]{background:#c5c0c0;border-radius:5px}.stepImage[_ngcontent-%COMP%]{height:5rem;width:5rem}"]}),t})();function Z(t,e){1&t&&(f.Vb(0,"th",18),f.Bc(1," No. "),f.Ub())}function Y(t,e){if(1&t&&(f.Vb(0,"td",19),f.Bc(1),f.Ub()),2&t){const t=e.index;f.Db(1),f.Dc(" ",t+1," ")}}function tt(t,e){1&t&&(f.Vb(0,"th",18),f.Bc(1," name "),f.Ub())}function et(t,e){if(1&t&&(f.Vb(0,"td",19),f.Bc(1),f.Ub()),2&t){const t=e.$implicit;f.Db(1),f.Dc(" ",t.displayName," ")}}function it(t,e){1&t&&(f.Vb(0,"th",18),f.Bc(1," View "),f.Ub())}function at(t,e){if(1&t){const t=f.Wb();f.Vb(0,"td",19),f.Vb(1,"button",20),f.cc("click",function(){f.tc(t);const i=e.$implicit;return f.gc().viewChallenge(i)}),f.Vb(2,"mat-icon"),f.Bc(3,"visibility"),f.Ub(),f.Ub(),f.Ub()}}function ot(t,e){1&t&&(f.Vb(0,"th",18),f.Bc(1," Edit "),f.Ub())}function rt(t,e){if(1&t){const t=f.Wb();f.Vb(0,"td",19),f.Vb(1,"button",20),f.cc("click",function(){f.tc(t);const i=e.$implicit;return f.gc().editChallenge(i)}),f.Vb(2,"mat-icon"),f.Bc(3,"create"),f.Ub(),f.Ub(),f.Ub()}}function nt(t,e){1&t&&(f.Vb(0,"th",18),f.Bc(1," Delete "),f.Ub())}function ct(t,e){if(1&t){const t=f.Wb();f.Vb(0,"td",19),f.Vb(1,"button",20),f.cc("click",function(){f.tc(t);const i=e.$implicit;return f.gc().deleteChallenge(i)}),f.Vb(2,"mat-icon"),f.Bc(3,"delete"),f.Ub(),f.Ub(),f.Ub()}}function st(t,e){1&t&&f.Qb(0,"tr",21)}function bt(t,e){1&t&&f.Qb(0,"tr",22)}const lt=function(){return[5,10,20]},ut=[{path:"",component:(()=>{class t{constructor(t,e,i,a,o){this.http=t,this.dialog=e,this.db=i,this.afStorage=a,this.spinner=o,this.displayedColumns=["id","name","view","edit","delete"],this.dataSource=new s.k([]),this.isLoading=!0,this.selectedItem=new n.e,this.searchOptions=[],this.http.currentPage="Programs"}getchallenges(){return Object(r.a)(this,void 0,void 0,function*(){const t=this.db.firestore.collection("Programs");this.unsubChallenges=yield t.onSnapshot(t=>{var e=[];t.forEach(t=>{e.push(t.data())}),e.length>0&&(this.searchOptions=e,this.dataSource=new s.k(e),this.dataSource.paginator=this.paginator,this.isLoading=!1),this.spinner.hide()},t=>{console.log("error",t)})})}ngAfterViewInit(){this.dataSource.paginator=this.paginator}ngOnInit(){this.spinner.show(),this.getchallenges(),this.applySearch()}applySearch(){this.filteredOptions=this.selectedItem.valueChanges.pipe(Object(b.a)(""),Object(l.a)(t=>"string"==typeof t?t:t.displayName),Object(l.a)(t=>t?this._filter(t):this.searchOptions.slice())),this.filteredOptions.subscribe(t=>{this.dataSource=new s.k(t),this.dataSource.paginator=this.paginator})}_filter(t){const e=t.toLowerCase();return console.log(this.searchOptions),this.searchOptions.filter(t=>0===t.displayName.toLowerCase().indexOf(e))}ngOnDestroy(){this.unsubChallenges()}viewChallenge(t){this.dialog.open(X,{data:t,width:"100vw",height:"90vh"}).afterClosed().subscribe(t=>{console.log(`Dialog result: ${t}`)})}editChallenge(t=null){this.dialog.open(T,{data:t,width:"100vw",height:"90vh"}).afterClosed().subscribe(t=>{console.log(`Dialog result: ${t}`)})}deleteChallenge(t=null){console.log(t),this.dialog.open(u.a,{data:{title:"Are you sure!",subTitle:"Do you want to delete this exercise"}}).afterClosed().subscribe(e=>{console.log(`Dialog result: ${e}`),e&&(this.spinner.show(),this.http.deleteProgram(t).subscribe(t=>{this.spinner.hide(),this.dialog.open(m.a,{data:{title:"Deleted!",subTitle:"Program deleted successfully."}})}))})}}return t.\u0275fac=function(e){return new(e||t)(f.Pb(V.a),f.Pb(d.b),f.Pb(C.a),f.Pb(g.a),f.Pb(y.c))},t.\u0275cmp=f.Jb({type:t,selectors:[["app-programs"]],viewQuery:function(t,e){if(1&t&&f.Fc(c.a,1),2&t){let t;f.qc(t=f.dc())&&(e.paginator=t.first)}},decls:31,vars:6,consts:[[1,"header"],["appearance","outline",1,"searchContainer2"],["type","text","matInput","",3,"formControl"],["matPrefix","","color","primary"],["mat-button","","color","primary",2,"height","3rem",3,"click"],[2,"margin-right","0.2rem"],[1,"mat-elevation-z8"],["mat-table","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","view"],["matColumnDef","edit"],["matColumnDef","delete"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","primary",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(f.Vb(0,"div",0),f.Vb(1,"mat-form-field",1),f.Vb(2,"mat-label"),f.Bc(3,"Search"),f.Ub(),f.Qb(4,"input",2),f.Vb(5,"mat-icon",3),f.Bc(6,"search"),f.Ub(),f.Ub(),f.Vb(7,"button",4),f.cc("click",function(){return e.editChallenge()}),f.Vb(8,"mat-icon",5),f.Bc(9,"add_circle"),f.Ub(),f.Bc(10," Add Program "),f.Ub(),f.Ub(),f.Vb(11,"div",6),f.Vb(12,"table",7),f.Tb(13,8),f.Ac(14,Z,2,0,"th",9),f.Ac(15,Y,2,1,"td",10),f.Sb(),f.Tb(16,11),f.Ac(17,tt,2,0,"th",9),f.Ac(18,et,2,1,"td",10),f.Sb(),f.Tb(19,12),f.Ac(20,it,2,0,"th",9),f.Ac(21,at,4,0,"td",10),f.Sb(),f.Tb(22,13),f.Ac(23,ot,2,0,"th",9),f.Ac(24,rt,4,0,"td",10),f.Sb(),f.Tb(25,14),f.Ac(26,nt,2,0,"th",9),f.Ac(27,ct,4,0,"td",10),f.Sb(),f.Ac(28,st,1,0,"tr",15),f.Ac(29,bt,1,0,"tr",16),f.Ub(),f.Qb(30,"mat-paginator",17),f.Ub()),2&t&&(f.Db(4),f.lc("formControl",e.selectedItem),f.Db(8),f.lc("dataSource",e.dataSource),f.Db(16),f.lc("matHeaderRowDef",e.displayedColumns),f.Db(1),f.lc("matRowDefColumns",e.displayedColumns),f.Db(1),f.lc("pageSizeOptions",f.nc(5,lt)))},directives:[D.b,D.f,O.b,n.b,n.n,n.f,B.a,D.g,w.a,s.j,s.c,s.e,s.b,s.g,s.i,c.a,s.d,s.a,s.f,s.h],styles:["table[_ngcontent-%COMP%]{width:100%}"]}),t})()}];let mt=(()=>{class t{}return t.\u0275mod=f.Nb({type:t}),t.\u0275inj=f.Mb({factory:function(e){return new(e||t)},imports:[[o.c.forChild(ut)],o.c]}),t})();var dt=i("hGdz");let ht=(()=>{class t{}return t.\u0275mod=f.Nb({type:t}),t.\u0275inj=f.Mb({factory:function(e){return new(e||t)},imports:[[a.c,mt,dt.a]]}),t})()}}]);