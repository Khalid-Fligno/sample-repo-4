(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"j+3n":function(t,e,i){"use strict";i.r(e),i.d(e,"BlogsModule",function(){return G});var n=i("ofXK"),o=i("tyNb"),a=i("mrSG"),c=i("3Pt+"),r=i("M9IT"),s=i("+0xr"),l=i("JX91"),b=i("lJxs"),d=i("QC9C"),m=i("cyHM"),u=i("0IaG"),g=i("7Cbv"),h=i("fXoL"),p=i("Vaw3"),f=i("jhN1"),U=i("F11b"),v=i("JqCM"),V=i("kmnG"),y=i("qFsG"),C=i("bTqV"),w=i("NFeN");function D(t,e){if(1&t&&h.Qb(0,"img",18),2&t){const t=h.gc();h.lc("src",t.sanitizedImagePath(t.f.coverImage.value),h.vc)}}function B(t,e){if(1&t){const t=h.Wb();h.Vb(0,"div",19),h.Vb(1,"span"),h.Vb(2,"mat-form-field",5),h.Qb(3,"input",20),h.Ub(),h.Vb(4,"button",11),h.cc("click",function(){h.tc(t);const i=e.index;return h.gc().removeTag(i)}),h.Vb(5,"mat-icon"),h.Bc(6,"remove_circle"),h.Ub(),h.Ub(),h.Ub(),h.Ub()}if(2&t){const t=e.index;h.Db(3),h.lc("formControlName",t)}}let O=(()=>{class t{constructor(t,e,i,n,o,a,r,s){this.fb=t,this.afStorage=e,this.sanitizer=i,this.http=n,this.spinner=o,this.dialog=a,this.data=r,this.dialogRef=s;const l=this.data;this.Form=this.fb.group({id:l?l.id:Object(g.a)(),title:[l&&l.title?l.title:"",c.u.required],coverImage:[l&&l.coverImage?l.coverImage:"",c.u.required],description:[l&&l.description?l.description:"",c.u.required],endDay:[l&&l.endDay?l.endDay:"",c.u.required],startDay:[l&&l.startDay?l.startDay:"",c.u.required],tags:this.fb.array(l&&l.tags?l.tags.map(t=>t):[]),urlLink:[l&&l.urlLink?l.urlLink:"",c.u.required]})}get f(){return this.Form.controls}get tags(){return this.Form.get("tags")}addTag(){this.tags.push(this.fb.control(""))}removeTag(t){this.tags.removeAt(t)}sanitizedImagePath(t){if("object"==typeof t){let e=URL.createObjectURL(t);return this.sanitizer.bypassSecurityTrustUrl(e)}return t}onFileChange(t){return Object(a.a)(this,void 0,void 0,function*(){const e=new FileReader;if(t.target.files&&t.target.files.length){const[i]=t.target.files;e.readAsDataURL(i),e.onload=()=>Object(a.a)(this,void 0,void 0,function*(){const t=yield fetch(e.result);yield t.blob().then(t=>{this.Form.patchValue({coverImage:t})})})}})}onSubmit(){this.spinner.show(),this.upload()}upload(){return Object(a.a)(this,void 0,void 0,function*(){Promise.all([{image:this.Form.value.coverImage}].map((t,e)=>Object(a.a)(this,void 0,void 0,function*(){return new Promise((e,i)=>Object(a.a)(this,void 0,void 0,function*(){if("object"==typeof t.image){const n=this.afStorage.ref(`Blogs/${this.Form.value.id}/coverImage`).put(t.image);this.uploadProgress=n.percentageChanges(),(yield n).ref.getDownloadURL().then(t=>{this.Form.patchValue({coverImage:t}),setTimeout(e,0,"success")}).catch(t=>{console.log("Error in uploading",t),setTimeout(i,0,"failed")})}else setTimeout(e,0,"success")}))}))).then(t=>{console.log(t,"then"),this.saveData()}).catch(t=>console.log("Error!",t))})}saveData(){console.log(this.Form.value),this.http.addEditBlog(this.Form.value).subscribe(t=>{t.success&&(this.dialog.open(m.a,{data:{title:"Updated!",subTitle:"Exercise updated successfully."}}),this.dialogRef.close()),this.spinner.hide()},t=>{console.log("HTTP Error",t),this.spinner.hide(),alert("Something went wrong,please try again")})}}return t.\u0275fac=function(e){return new(e||t)(h.Pb(c.d),h.Pb(p.a),h.Pb(f.b),h.Pb(U.a),h.Pb(v.c),h.Pb(u.b),h.Pb(u.a),h.Pb(u.g))},t.\u0275cmp=h.Jb({type:t,selectors:[["app-edit"]],decls:42,vars:3,consts:[[1,"mat-typography"],[3,"formGroup"],[1,"imgContainer"],["class","coverImage",3,"src",4,"ngIf"],["type","file","accept",".png,.jpg",3,"change"],["appearance","outline",1,"example-full-width"],["matInput","","formControlName","title","required",""],["matInput","","formControlName","description","required",""],["matInput","","type","number","formControlName","startDay","required",""],["matInput","","type","number","formControlName","endDay"],["formArrayName","tags"],["mat-icon-button","","color","primary",3,"click"],["style","justify-content: center;",4,"ngFor","ngForOf"],["matInput","","formControlName","urlLink","required",""],["align","end"],["mat-button","","mat-dialog-close",""],[1,"formFooter"],["mat-raised-button","","color","primary",3,"click"],[1,"coverImage",3,"src"],[2,"justify-content","center"],["matInput","",3,"formControlName"]],template:function(t,e){1&t&&(h.Vb(0,"mat-dialog-content",0),h.Vb(1,"form",1),h.Vb(2,"div",2),h.Vb(3,"h3"),h.Bc(4,"Cover image:"),h.Ub(),h.Ac(5,D,1,1,"img",3),h.Vb(6,"div"),h.Vb(7,"input",4),h.cc("change",function(t){return e.onFileChange(t)}),h.Ub(),h.Ub(),h.Ub(),h.Vb(8,"mat-form-field",5),h.Vb(9,"mat-label"),h.Bc(10,"Title"),h.Ub(),h.Qb(11,"input",6),h.Ub(),h.Vb(12,"mat-form-field",5),h.Vb(13,"mat-label"),h.Bc(14,"Description"),h.Ub(),h.Qb(15,"input",7),h.Ub(),h.Vb(16,"mat-form-field",5),h.Vb(17,"mat-label"),h.Bc(18,"Start Day"),h.Ub(),h.Qb(19,"input",8),h.Ub(),h.Vb(20,"mat-form-field",5),h.Vb(21,"mat-label"),h.Bc(22,"End Day"),h.Ub(),h.Qb(23,"input",9),h.Ub(),h.Vb(24,"div",10),h.Vb(25,"span"),h.Vb(26,"h3"),h.Bc(27,"Tags"),h.Ub(),h.Vb(28,"button",11),h.cc("click",function(){return e.addTag()}),h.Vb(29,"mat-icon"),h.Bc(30,"add_circle"),h.Ub(),h.Ub(),h.Ub(),h.Ac(31,B,7,1,"div",12),h.Ub(),h.Vb(32,"mat-form-field",5),h.Vb(33,"mat-label"),h.Bc(34,"URL Link"),h.Ub(),h.Qb(35,"input",13),h.Ub(),h.Ub(),h.Ub(),h.Vb(36,"mat-dialog-actions",14),h.Vb(37,"button",15),h.Bc(38,"Cancel"),h.Ub(),h.Vb(39,"div",16),h.Vb(40,"button",17),h.cc("click",function(){return e.onSubmit()}),h.Bc(41,"Submit"),h.Ub(),h.Ub(),h.Ub()),2&t&&(h.Db(1),h.lc("formGroup",e.Form),h.Db(4),h.lc("ngIf",e.f.coverImage.valid),h.Db(26),h.lc("ngForOf",e.tags.controls))},directives:[u.e,c.v,c.o,c.h,n.k,V.b,V.f,y.b,c.b,c.n,c.g,c.t,c.r,c.c,C.a,w.a,n.j,u.c,u.d],styles:[".group[_ngcontent-%COMP%]{display:block;margin:10px}.example-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.example-full-width[_ngcontent-%COMP%]{width:100%}span[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}h3[_ngcontent-%COMP%]{margin:0}.coverImage[_ngcontent-%COMP%]{height:10rem;width:10rem;background:#c5c0c0;border-radius:5px}.imgContainer[_ngcontent-%COMP%]{margin-bottom:.5rem}"]}),t})();var P=i("MutI");function I(t,e){if(1&t&&(h.Vb(0,"mat-list-item",9),h.Bc(1),h.Ub()),2&t){const t=e.$implicit;h.Db(1),h.Cc(t)}}let k=(()=>{class t{constructor(t){this.data=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(h.Pb(u.a))},t.\u0275cmp=h.Jb({type:t,selectors:[["app-view"]],decls:28,vars:8,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"coverImage",3,"src"],[1,"heading"],["role","list"],["role","listitem",4,"ngFor","ngForOf"],[3,"href"],["align","end"],["mat-button","","mat-dialog-close",""],["role","listitem"]],template:function(t,e){1&t&&(h.Vb(0,"h2",0),h.Bc(1),h.Ub(),h.Vb(2,"mat-dialog-content",1),h.Qb(3,"img",2),h.Vb(4,"h3",3),h.Bc(5,"Description :"),h.Ub(),h.Vb(6,"p"),h.Bc(7),h.Ub(),h.Vb(8,"h3",3),h.Bc(9,"Start Day :"),h.Ub(),h.Vb(10,"p"),h.Bc(11),h.Ub(),h.Vb(12,"h3",3),h.Bc(13,"End Day :"),h.Ub(),h.Vb(14,"p"),h.Bc(15),h.Ub(),h.Vb(16,"h3",3),h.Bc(17,"Tags :"),h.Ub(),h.Vb(18,"mat-list",4),h.Ac(19,I,2,1,"mat-list-item",5),h.Ub(),h.Vb(20,"h3",3),h.Bc(21,"URL Link :"),h.Ub(),h.Vb(22,"p"),h.Vb(23,"a",6),h.Bc(24),h.Ub(),h.Ub(),h.Ub(),h.Vb(25,"mat-dialog-actions",7),h.Vb(26,"button",8),h.Bc(27,"Cancel"),h.Ub(),h.Ub()),2&t&&(h.Db(1),h.Cc(e.data.title),h.Db(2),h.lc("src",e.data.coverImage,h.vc),h.Db(4),h.Cc(e.data.description),h.Db(4),h.Cc(e.data.startDay),h.Db(4),h.Cc(e.data.endDay),h.Db(4),h.lc("ngForOf",e.data.tags),h.Db(4),h.mc("href",e.data.urlLink,h.vc),h.Db(1),h.Dc(" ",e.data.urlLink," "))},directives:[u.h,u.e,P.a,n.j,u.c,C.a,u.d,P.b],styles:[".mat-list-base[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%], .mat-list-base[_ngcontent-%COMP%]   .mat-list-option[_ngcontent-%COMP%]{display:block;-webkit-tap-highlight-color:transparent;width:100%;padding-bottom:.5rem;height:auto;font-size:.9rem}h4[_ngcontent-%COMP%]{margin:0}h4[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{padding-left:16px}video[_ngcontent-%COMP%]{margin-left:16px}.stepTitleContainer[_ngcontent-%COMP%]{display:flex;align-items:baseline}.coverImage[_ngcontent-%COMP%]{height:10rem;width:10rem}.coverImage[_ngcontent-%COMP%], .stepImage[_ngcontent-%COMP%]{background:#c5c0c0;border-radius:5px}.stepImage[_ngcontent-%COMP%]{height:5rem;width:5rem}"]}),t})();var S=i("I/3d");function M(t,e){1&t&&(h.Vb(0,"th",18),h.Bc(1," No. "),h.Ub())}function _(t,e){if(1&t&&(h.Vb(0,"td",19),h.Bc(1),h.Ub()),2&t){const t=e.index;h.Db(1),h.Dc(" ",t+1," ")}}function F(t,e){1&t&&(h.Vb(0,"th",18),h.Bc(1," name "),h.Ub())}function x(t,e){if(1&t&&(h.Vb(0,"td",19),h.Bc(1),h.Ub()),2&t){const t=e.$implicit;h.Db(1),h.Dc(" ",t.title," ")}}function T(t,e){1&t&&(h.Vb(0,"th",18),h.Bc(1," View "),h.Ub())}function j(t,e){if(1&t){const t=h.Wb();h.Vb(0,"td",19),h.Vb(1,"button",20),h.cc("click",function(){h.tc(t);const i=e.$implicit;return h.gc().viewBlog(i)}),h.Vb(2,"mat-icon"),h.Bc(3,"visibility"),h.Ub(),h.Ub(),h.Ub()}}function A(t,e){1&t&&(h.Vb(0,"th",18),h.Bc(1," Edit "),h.Ub())}function L(t,e){if(1&t){const t=h.Wb();h.Vb(0,"td",19),h.Vb(1,"button",20),h.cc("click",function(){h.tc(t);const i=e.$implicit;return h.gc().editBlog(i)}),h.Vb(2,"mat-icon"),h.Bc(3,"create"),h.Ub(),h.Ub(),h.Ub()}}function N(t,e){1&t&&(h.Vb(0,"th",18),h.Bc(1," Delete "),h.Ub())}function q(t,e){if(1&t){const t=h.Wb();h.Vb(0,"td",19),h.Vb(1,"button",20),h.cc("click",function(){h.tc(t);const i=e.$implicit;return h.gc().deleteBlog(i)}),h.Vb(2,"mat-icon"),h.Bc(3,"delete"),h.Ub(),h.Ub(),h.Ub()}}function Q(t,e){1&t&&h.Qb(0,"tr",21)}function R(t,e){1&t&&h.Qb(0,"tr",22)}const z=function(){return[5,10,20]},E=[{path:"",component:(()=>{class t{constructor(t,e,i,n,o){this.http=t,this.dialog=e,this.db=i,this.afStorage=n,this.spinner=o,this.displayedColumns=["id","name","view","edit","delete"],this.dataSource=new s.k([]),this.isLoading=!0,this.selectedItem=new c.e,this.searchOptions=[],this.http.currentPage="Blogs"}getBlogs(){return Object(a.a)(this,void 0,void 0,function*(){const t=this.db.firestore.collection("Blogs");this.unsubBlog=yield t.onSnapshot(t=>{var e=[];t.forEach(t=>{e.push(t.data())}),e.length>0&&(this.searchOptions=e,this.dataSource=new s.k(e),this.dataSource.paginator=this.paginator,this.isLoading=!1),this.spinner.hide()},t=>{console.log("error",t)})})}ngAfterViewInit(){this.dataSource.paginator=this.paginator}ngOnInit(){this.spinner.show(),this.getBlogs(),this.applySearch()}applySearch(){this.filteredOptions=this.selectedItem.valueChanges.pipe(Object(l.a)(""),Object(b.a)(t=>"string"==typeof t?t:t.title),Object(b.a)(t=>t?this._filter(t):this.searchOptions.slice())),this.filteredOptions.subscribe(t=>{this.dataSource=new s.k(t),this.dataSource.paginator=this.paginator})}_filter(t){const e=t.toLowerCase();return console.log(this.searchOptions),this.searchOptions.filter(t=>0===t.title.toLowerCase().indexOf(e))}ngOnDestroy(){this.unsubBlog()}viewBlog(t){this.dialog.open(k,{data:t,width:"100vw"}).afterClosed().subscribe(t=>{console.log(`Dialog result: ${t}`)})}editBlog(t=null){this.dialog.open(O,{data:t,width:"100vw"}).afterClosed().subscribe(t=>{console.log(`Dialog result: ${t}`)})}deleteBlog(t=null){console.log(t),this.dialog.open(d.a,{data:{title:"Are you sure!",subTitle:"Do you want to delete this exercise"}}).afterClosed().subscribe(e=>{console.log(`Dialog result: ${e}`),e&&(this.spinner.show(),this.http.deleteBlog(t).subscribe(t=>{this.spinner.hide(),this.dialog.open(m.a,{data:{title:"Deleted!",subTitle:"Blog deleted successfully."}})}))})}}return t.\u0275fac=function(e){return new(e||t)(h.Pb(U.a),h.Pb(u.b),h.Pb(S.a),h.Pb(p.a),h.Pb(v.c))},t.\u0275cmp=h.Jb({type:t,selectors:[["app-blogs"]],viewQuery:function(t,e){if(1&t&&h.Fc(r.a,1),2&t){let t;h.qc(t=h.dc())&&(e.paginator=t.first)}},decls:31,vars:6,consts:[[1,"header"],["appearance","outline",1,"searchContainer2"],["type","text","matInput","",3,"formControl"],["matPrefix","","color","primary"],["mat-button","","color","primary",2,"height","3rem",3,"click"],[2,"margin-right","0.2rem"],[1,"mat-elevation-z8"],["mat-table","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","view"],["matColumnDef","edit"],["matColumnDef","delete"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","primary",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(h.Vb(0,"div",0),h.Vb(1,"mat-form-field",1),h.Vb(2,"mat-label"),h.Bc(3,"Search"),h.Ub(),h.Qb(4,"input",2),h.Vb(5,"mat-icon",3),h.Bc(6,"search"),h.Ub(),h.Ub(),h.Vb(7,"button",4),h.cc("click",function(){return e.editBlog()}),h.Vb(8,"mat-icon",5),h.Bc(9,"add_circle"),h.Ub(),h.Bc(10," Add Blog "),h.Ub(),h.Ub(),h.Vb(11,"div",6),h.Vb(12,"table",7),h.Tb(13,8),h.Ac(14,M,2,0,"th",9),h.Ac(15,_,2,1,"td",10),h.Sb(),h.Tb(16,11),h.Ac(17,F,2,0,"th",9),h.Ac(18,x,2,1,"td",10),h.Sb(),h.Tb(19,12),h.Ac(20,T,2,0,"th",9),h.Ac(21,j,4,0,"td",10),h.Sb(),h.Tb(22,13),h.Ac(23,A,2,0,"th",9),h.Ac(24,L,4,0,"td",10),h.Sb(),h.Tb(25,14),h.Ac(26,N,2,0,"th",9),h.Ac(27,q,4,0,"td",10),h.Sb(),h.Ac(28,Q,1,0,"tr",15),h.Ac(29,R,1,0,"tr",16),h.Ub(),h.Qb(30,"mat-paginator",17),h.Ub()),2&t&&(h.Db(4),h.lc("formControl",e.selectedItem),h.Db(8),h.lc("dataSource",e.dataSource),h.Db(16),h.lc("matHeaderRowDef",e.displayedColumns),h.Db(1),h.lc("matRowDefColumns",e.displayedColumns),h.Db(1),h.lc("pageSizeOptions",h.nc(5,z)))},directives:[V.b,V.f,y.b,c.b,c.n,c.f,w.a,V.g,C.a,s.j,s.c,s.e,s.b,s.g,s.i,r.a,s.d,s.a,s.f,s.h],styles:["table[_ngcontent-%COMP%]{width:100%}"]}),t})()}];let $=(()=>{class t{}return t.\u0275mod=h.Nb({type:t}),t.\u0275inj=h.Mb({factory:function(e){return new(e||t)},imports:[[o.c.forChild(E)],o.c]}),t})();var J=i("hGdz");let G=(()=>{class t{}return t.\u0275mod=h.Nb({type:t}),t.\u0275inj=h.Mb({factory:function(e){return new(e||t)},imports:[[n.c,$,J.a]]}),t})()}}]);