(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{y56J:function(t,e,i){"use strict";i.r(e),i.d(e,"ExercisesModule",function(){return Y});var o=i("ofXK"),n=i("tyNb"),c=i("mrSG"),a=i("3Pt+"),s=i("M9IT"),r=i("+0xr"),l=i("JX91"),b=i("lJxs"),d=i("QC9C"),u=i("cyHM"),m=i("0IaG"),h=i("7Cbv"),p=i("fXoL"),f=i("Vaw3"),g=i("jhN1"),v=i("F11b"),V=i("JqCM"),U=i("I/3d"),C=i("kmnG"),y=i("qFsG"),w=i("d3UM"),O=i("NFeN"),D=i("bTqV"),x=i("FKr1");function P(t,e){if(1&t&&(p.Vb(0,"mat-option",20),p.Bc(1),p.Ub()),2&t){const t=e.$implicit;p.lc("value",t.id),p.Db(1),p.Cc(t.name)}}function k(t,e){if(1&t){const t=p.Wb();p.Vb(0,"div",21),p.Vb(1,"span"),p.Vb(2,"mat-form-field",22),p.Qb(3,"input",23),p.Ub(),p.Vb(4,"button",12),p.cc("click",function(){p.tc(t);const i=e.index;return p.gc().removeCoacingTip(i)}),p.Vb(5,"mat-icon"),p.Bc(6,"remove_circle"),p.Ub(),p.Ub(),p.Ub(),p.Ub()}if(2&t){const t=e.index;p.Db(3),p.lc("formControlName",t)}}function B(t,e){if(1&t&&(p.Vb(0,"video",30),p.Qb(1,"source",31),p.Ub()),2&t){const t=p.gc().index,e=p.gc();p.Db(1),p.lc("src",e.sanitizedImagePath(e.videos.value[t].url),p.vc)}}function I(t,e){if(1&t){const t=p.Wb();p.Vb(0,"div",24),p.Vb(1,"div",25),p.Vb(2,"span"),p.Bc(3),p.Vb(4,"button",12),p.cc("click",function(){p.tc(t);const i=e.index;return p.gc().removeVideo(i)}),p.Vb(5,"mat-icon"),p.Bc(6,"remove_circle"),p.Ub(),p.Ub(),p.Ub(),p.Vb(7,"div",26),p.Ac(8,B,2,1,"video",27),p.Vb(9,"div"),p.Vb(10,"input",28),p.cc("change",function(i){p.tc(t);const o=e.index;return p.gc().onFileChange2(i,o)}),p.Ub(),p.Ub(),p.Ub(),p.Vb(11,"mat-form-field",2),p.Vb(12,"mat-label"),p.Bc(13,"Model"),p.Ub(),p.Qb(14,"input",29),p.Ub(),p.Ub(),p.Ub()}if(2&t){const t=e.index,i=p.gc();p.Db(1),p.lc("formGroupName",t),p.Db(2),p.Dc("Video ",t+1," "),p.Db(5),p.lc("ngIf",i.videos.value[t].url)}}let S=(()=>{class t{constructor(t,e,i,o,n,c,s,r,l){this.fb=t,this.afStorage=e,this.sanitizer=i,this.http=o,this.spinner=n,this.dialog=c,this.db=s,this.data=r,this.dialogRef=l,this.workoutList=[],this.searchOptions=[],this.selectedItem=new a.e;const b=this.data;this.Form=this.fb.group({id:b&&b.id?b.id:Object(h.a)(),name:[b&&b.name?b.name:"",a.u.required],displayName:[b&&b.displayName?b.displayName:"",a.u.required],recommendedResistance:b&&b.recommendedResistance?b.recommendedResistance:"",coachingTips:this.fb.array(b&&b.coachingTips?b.coachingTips.map(t=>t):[]),videos:this.fb.array(b&&b.videos?b.videos.map(t=>this.newVideo(t)):[]),workoutIds:[b&&b.workoutIds?b.workoutIds:"",a.u.required]})}ngOnInit(){this.getWorkouts(),this.applySearch()}ngOnDestroy(){this.unsubWorkouts()}getWorkouts(){return Object(c.a)(this,void 0,void 0,function*(){const t=this.db.firestore.collection("Workouts");this.unsubWorkouts=yield t.onSnapshot(t=>{var e=[];t.forEach(t=>{e.push(t.data())}),this.workoutList=this.searchOptions=e},t=>{console.log("erroe",t)})})}get f(){return this.Form.controls}get coachingTips(){return this.Form.get("coachingTips")}get videos(){return this.Form.get("videos")}addCoachingTip(){this.coachingTips.push(this.fb.control(""))}removeCoacingTip(t){this.coachingTips.removeAt(t)}addWorkout(){this.coachingTips.push(this.fb.control(""))}removeWorkout(t){this.coachingTips.removeAt(t)}newVideo(t=null){return this.fb.group({url:t?t.url:null,model:t?t.model:null})}addVideo(){this.videos.push(this.newVideo())}removeVideo(t){this.videos.removeAt(t)}sanitizedImagePath(t){if("object"==typeof t){let e=URL.createObjectURL(t);return this.sanitizer.bypassSecurityTrustUrl(e)}return t}onFileChange2(t,e){return Object(c.a)(this,void 0,void 0,function*(){const i=new FileReader;if(t.target.files&&t.target.files.length){const[o]=t.target.files;i.readAsDataURL(o),i.onload=()=>Object(c.a)(this,void 0,void 0,function*(){const t=yield fetch(i.result);yield t.blob().then(t=>{this.videos.at(e).patchValue({url:t})})})}})}onSubmit(){this.spinner.show(),this.upload()}upload(){return Object(c.a)(this,void 0,void 0,function*(){let t=this.videos.value.length>0?[...this.videos.value]:[];console.log(t),Promise.all(t.map((t,e)=>Object(c.a)(this,void 0,void 0,function*(){return new Promise((i,o)=>Object(c.a)(this,void 0,void 0,function*(){if("object"==typeof t.url){const n=this.afStorage.ref(`Exercises/${this.Form.value.id}/Video${e+1}`).put(t.url);this.uploadProgress=n.percentageChanges(),(yield n).ref.getDownloadURL().then(t=>{this.videos.at(e).patchValue({url:t}),setTimeout(i,0,"success")}).catch(t=>{console.log("Error in uploading",t),setTimeout(o,0,"failed")})}else setTimeout(i,0,"success")}))}))).then(t=>{console.log(t,"then"),this.saveData()}).catch(t=>console.log("Error!",t))})}saveData(){console.log(this.Form.value),this.http.addEditExercises(this.Form.value).subscribe(t=>{t.success&&this.dialog.open(u.a,{data:{title:"Updated!",subTitle:"Exercise updated successfully."}}),this.dialogRef.close(),this.spinner.hide()},t=>{console.log("HTTP Error",t),this.spinner.hide(),alert("Something went wrong,please try again")})}applySearch(){this.filteredOptions=this.selectedItem.valueChanges.pipe(Object(l.a)(""),Object(b.a)(t=>"string"==typeof t?t:t.name),Object(b.a)(t=>t?this._filter(t):this.searchOptions.slice())),this.filteredOptions.subscribe(t=>{console.log(t),t.length>0&&(this.workoutList=t,console.log(this.workoutList))})}_filter(t){const e=t.toLowerCase();return this.searchOptions.filter(t=>0===t.name.toLowerCase().indexOf(e))}}return t.\u0275fac=function(e){return new(e||t)(p.Pb(a.d),p.Pb(f.a),p.Pb(g.b),p.Pb(v.a),p.Pb(V.c),p.Pb(m.b),p.Pb(U.a),p.Pb(m.a),p.Pb(m.g))},t.\u0275cmp=p.Jb({type:t,selectors:[["app-edit-exercise"]],decls:50,vars:5,consts:[[1,"mat-typography"],[3,"formGroup"],["appearance","outline"],["matInput","","formControlName","name","required",""],["matInput","","formControlName","displayName","required",""],["matInput","","type","text","formControlName","recommendedResistance","required",""],["formControlName","workoutIds","multiple",""],["appearance","outline",1,"searchContainer"],["type","text","matInput","",3,"formControl"],["matPrefix","","color","primary"],[3,"value",4,"ngFor","ngForOf"],["formArrayName","coachingTips"],["mat-icon-button","","color","primary",3,"click"],["style","justify-content: center;","class","group",4,"ngFor","ngForOf"],["formArrayName","videos"],["class","group",4,"ngFor","ngForOf"],["align","end"],["mat-button","","mat-dialog-close",""],[1,"formFooter"],["mat-raised-button","","color","primary",3,"click"],[3,"value"],[1,"group",2,"justify-content","center"],["appearance","outline",1,"example-full-width"],["matInput","",3,"formControlName"],[1,"group"],[3,"formGroupName"],[1,"imgContainer"],["class","coverImage","controls","","autoplay","","loop","",4,"ngIf"],["type","file","accept",".mp4",3,"change"],["matInput","","formControlName","model"],["controls","","autoplay","","loop","",1,"coverImage"],["type","video/mp4",3,"src"]],template:function(t,e){1&t&&(p.Vb(0,"mat-dialog-content",0),p.Vb(1,"form",1),p.Vb(2,"mat-form-field",2),p.Vb(3,"mat-label"),p.Bc(4,"Name"),p.Ub(),p.Qb(5,"input",3),p.Ub(),p.Vb(6,"mat-form-field",2),p.Vb(7,"mat-label"),p.Bc(8,"Display name"),p.Ub(),p.Qb(9,"input",4),p.Ub(),p.Vb(10,"mat-form-field",2),p.Vb(11,"mat-label"),p.Bc(12,"Recommended resistance"),p.Ub(),p.Qb(13,"input",5),p.Ub(),p.Vb(14,"div"),p.Vb(15,"mat-form-field",2),p.Vb(16,"mat-label"),p.Bc(17,"Select Wokouts"),p.Ub(),p.Vb(18,"mat-select",6),p.Vb(19,"mat-form-field",7),p.Vb(20,"mat-label"),p.Bc(21,"Search"),p.Ub(),p.Qb(22,"input",8),p.Vb(23,"mat-icon",9),p.Bc(24,"search"),p.Ub(),p.Ub(),p.Ac(25,P,2,2,"mat-option",10),p.Ub(),p.Vb(26,"mat-hint"),p.Bc(27,"Select workout that contain this exercise."),p.Ub(),p.Ub(),p.Ub(),p.Vb(28,"div",11),p.Vb(29,"span"),p.Vb(30,"h3"),p.Bc(31,"Coaching tips"),p.Ub(),p.Vb(32,"button",12),p.cc("click",function(){return e.addCoachingTip()}),p.Vb(33,"mat-icon"),p.Bc(34,"add_circle"),p.Ub(),p.Ub(),p.Ub(),p.Ac(35,k,7,1,"div",13),p.Ub(),p.Vb(36,"div",14),p.Vb(37,"span"),p.Vb(38,"h3"),p.Bc(39,"Videos:"),p.Ub(),p.Vb(40,"button",12),p.cc("click",function(){return e.addVideo()}),p.Vb(41,"mat-icon"),p.Bc(42,"add_circle"),p.Ub(),p.Ub(),p.Ub(),p.Ac(43,I,15,3,"div",15),p.Ub(),p.Ub(),p.Ub(),p.Vb(44,"mat-dialog-actions",16),p.Vb(45,"button",17),p.Bc(46,"Cancel"),p.Ub(),p.Vb(47,"div",18),p.Vb(48,"button",19),p.cc("click",function(){return e.onSubmit()}),p.Bc(49,"Submit"),p.Ub(),p.Ub(),p.Ub()),2&t&&(p.Db(1),p.lc("formGroup",e.Form),p.Db(21),p.lc("formControl",e.selectedItem),p.Db(3),p.lc("ngForOf",e.workoutList),p.Db(10),p.lc("ngForOf",e.coachingTips.controls),p.Db(8),p.lc("ngForOf",e.videos.controls))},directives:[m.e,a.v,a.o,a.h,C.b,C.f,y.b,a.b,a.n,a.g,a.t,w.a,a.f,O.a,C.g,o.j,C.e,a.c,D.a,m.c,m.d,x.k,a.i,o.k],styles:[".group[_ngcontent-%COMP%]{display:block;margin:10px}.example-full-width[_ngcontent-%COMP%]{width:100%}.mat-form-field[_ngcontent-%COMP%]{display:flex;flex-direction:column}span[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}h3[_ngcontent-%COMP%]{margin:0}.coverImage[_ngcontent-%COMP%]{height:10rem;width:10rem;background:#c5c0c0;border-radius:5px}"]}),t})();var T=i("MutI");function F(t,e){if(1&t&&(p.Vb(0,"mat-list-item",8),p.Bc(1),p.Ub()),2&t){const t=e.$implicit;p.Db(1),p.Dc("\u2022 ",t,"")}}function M(t,e){if(1&t&&(p.Vb(0,"div"),p.Vb(1,"h4"),p.Bc(2),p.Ub(),p.Vb(3,"video",9),p.Qb(4,"source",10),p.Ub(),p.Vb(5,"div",11),p.Vb(6,"h4"),p.Bc(7,"Model : "),p.Ub(),p.Vb(8,"p",12),p.Bc(9),p.Ub(),p.Ub(),p.Ub()),2&t){const t=e.$implicit,i=e.index;p.Db(2),p.Dc("Video ",i+1,""),p.Db(2),p.lc("src",t.url,p.vc),p.Db(5),p.Cc(t.model)}}let _=(()=>{class t{constructor(t){this.data=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(p.Pb(m.a))},t.\u0275cmp=p.Jb({type:t,selectors:[["app-view-exercise"]],decls:17,vars:4,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"heading"],["role","list"],["role","listitem",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["align","end"],["mat-button","","mat-dialog-close",""],["role","listitem"],["controls","","autoplay","","loop","",1,"coverImage"],["type","video/mp4",3,"src"],[1,"stepTitleContainer"],[2,"padding","5px"]],template:function(t,e){1&t&&(p.Vb(0,"h2",0),p.Bc(1),p.Ub(),p.Vb(2,"mat-dialog-content",1),p.Vb(3,"h3",2),p.Bc(4,"Coaching Tips :"),p.Ub(),p.Vb(5,"mat-list",3),p.Ac(6,F,2,1,"mat-list-item",4),p.Ub(),p.Vb(7,"h3",2),p.Bc(8,"Recommended resistance :"),p.Ub(),p.Vb(9,"p"),p.Bc(10),p.Ub(),p.Vb(11,"h3",2),p.Bc(12,"Videos :"),p.Ub(),p.Ac(13,M,10,3,"div",5),p.Ub(),p.Vb(14,"mat-dialog-actions",6),p.Vb(15,"button",7),p.Bc(16,"Cancel"),p.Ub(),p.Ub()),2&t&&(p.Db(1),p.Cc(e.data.name),p.Db(5),p.lc("ngForOf",e.data.coachingTips),p.Db(4),p.Cc(e.data.recommendedResistance),p.Db(3),p.lc("ngForOf",e.data.videos))},directives:[m.h,m.e,T.a,o.j,m.c,D.a,m.d,T.b],styles:[".mat-list-base[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%], .mat-list-base[_ngcontent-%COMP%]   .mat-list-option[_ngcontent-%COMP%]{display:block;-webkit-tap-highlight-color:transparent;width:100%;padding-bottom:.5rem;height:auto;font-size:.9rem}h4[_ngcontent-%COMP%]{margin:0}h4[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{padding-left:16px}video[_ngcontent-%COMP%]{margin-left:16px}.stepTitleContainer[_ngcontent-%COMP%]{display:flex;align-items:baseline}.coverImage[_ngcontent-%COMP%]{height:10rem;width:10rem}.coverImage[_ngcontent-%COMP%], .stepImage[_ngcontent-%COMP%]{background:#c5c0c0;border-radius:5px}.stepImage[_ngcontent-%COMP%]{height:5rem;width:5rem}"]}),t})();function A(t,e){1&t&&(p.Vb(0,"th",18),p.Bc(1," No. "),p.Ub())}function E(t,e){if(1&t&&(p.Vb(0,"td",19),p.Bc(1),p.Ub()),2&t){const t=e.index;p.Db(1),p.Dc(" ",t+1," ")}}function j(t,e){1&t&&(p.Vb(0,"th",18),p.Bc(1," name "),p.Ub())}function N(t,e){if(1&t&&(p.Vb(0,"td",19),p.Bc(1),p.Ub()),2&t){const t=e.$implicit;p.Db(1),p.Dc(" ",t.name," ")}}function R(t,e){1&t&&(p.Vb(0,"th",18),p.Bc(1," View "),p.Ub())}function L(t,e){if(1&t){const t=p.Wb();p.Vb(0,"td",19),p.Vb(1,"button",20),p.cc("click",function(){p.tc(t);const i=e.$implicit;return p.gc().viewExercise(i)}),p.Vb(2,"mat-icon"),p.Bc(3,"visibility"),p.Ub(),p.Ub(),p.Ub()}}function Q(t,e){1&t&&(p.Vb(0,"th",18),p.Bc(1," Edit "),p.Ub())}function W(t,e){if(1&t){const t=p.Wb();p.Vb(0,"td",19),p.Vb(1,"button",20),p.cc("click",function(){p.tc(t);const i=e.$implicit;return p.gc().editExercise(i)}),p.Vb(2,"mat-icon"),p.Bc(3,"create"),p.Ub(),p.Ub(),p.Ub()}}function $(t,e){1&t&&(p.Vb(0,"th",18),p.Bc(1," Delete "),p.Ub())}function q(t,e){if(1&t){const t=p.Wb();p.Vb(0,"td",19),p.Vb(1,"button",20),p.cc("click",function(){p.tc(t);const i=e.$implicit;return p.gc().deleteExercise(i)}),p.Vb(2,"mat-icon"),p.Bc(3,"delete"),p.Ub(),p.Ub(),p.Ub()}}function z(t,e){1&t&&p.Qb(0,"tr",21)}function G(t,e){1&t&&p.Qb(0,"tr",22)}const J=function(){return[5,10,20]},H=[{path:"",component:(()=>{class t{constructor(t,e,i,o,n){this.http=t,this.dialog=e,this.db=i,this.afStorage=o,this.spinner=n,this.displayedColumns=["id","name","view","edit","delete"],this.dataSource=new r.k([]),this.isLoading=!0,this.selectedItem=new a.e,this.searchOptions=[],this.http.currentPage="Exercises"}getExercises(){return Object(c.a)(this,void 0,void 0,function*(){const t=this.db.firestore.collection("Exercises");this.unsubExercise=yield t.onSnapshot(t=>{var e=[];t.forEach(t=>{e.push(t.data())}),e.length>0&&(this.searchOptions=[...e],this.dataSource=new r.k(e),this.dataSource.paginator=this.paginator,this.isLoading=!1,this.spinner.hide())},t=>{console.log("erroe",t)})})}ngAfterViewInit(){this.dataSource.paginator=this.paginator}ngOnInit(){this.spinner.show(),this.getExercises(),this.applySearch()}applySearch(){this.filteredOptions=this.selectedItem.valueChanges.pipe(Object(l.a)(""),Object(b.a)(t=>"string"==typeof t?t:t.name),Object(b.a)(t=>t?this._filter(t):this.searchOptions.slice())),this.filteredOptions.subscribe(t=>{this.dataSource=new r.k(t),this.dataSource.paginator=this.paginator})}_filter(t){const e=t.toLowerCase();return this.searchOptions.filter(t=>0===t.name.toLowerCase().indexOf(e))}ngOnDestroy(){this.unsubExercise()}viewExercise(t){this.dialog.open(_,{data:t,width:"100vw"}).afterClosed().subscribe(t=>{console.log(`Dialog result: ${t}`)})}editExercise(t=null){this.dialog.open(S,{data:t,width:"100vw"}).afterClosed().subscribe(t=>{console.log(`Dialog result: ${t}`)})}deleteExercise(t=null){this.dialog.open(d.a,{data:{title:"Are you sure!",subTitle:"Do you want to delete this exercise"}}).afterClosed().subscribe(e=>{console.log(`Dialog result: ${e}`),e&&(this.spinner.show(),this.http.deleteExercise(t).subscribe(t=>{this.spinner.hide(),this.dialog.open(u.a,{data:{title:"Deleted!",subTitle:"Recipe deleted successfully."}})}))})}}return t.\u0275fac=function(e){return new(e||t)(p.Pb(v.a),p.Pb(m.b),p.Pb(U.a),p.Pb(f.a),p.Pb(V.c))},t.\u0275cmp=p.Jb({type:t,selectors:[["app-exercises"]],viewQuery:function(t,e){if(1&t&&p.Fc(s.a,1),2&t){let t;p.qc(t=p.dc())&&(e.paginator=t.first)}},decls:31,vars:6,consts:[[1,"header"],["appearance","outline",1,"searchContainer2"],["type","text","matInput","",3,"formControl"],["matPrefix","","color","primary"],["mat-button","","color","primary",2,"height","3rem",3,"click"],[2,"margin-right","0.2rem"],[1,"mat-elevation-z8"],["mat-table","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","view"],["matColumnDef","edit"],["matColumnDef","delete"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","primary",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(p.Vb(0,"div",0),p.Vb(1,"mat-form-field",1),p.Vb(2,"mat-label"),p.Bc(3,"Search"),p.Ub(),p.Qb(4,"input",2),p.Vb(5,"mat-icon",3),p.Bc(6,"search"),p.Ub(),p.Ub(),p.Vb(7,"button",4),p.cc("click",function(){return e.editExercise()}),p.Vb(8,"mat-icon",5),p.Bc(9,"add_circle"),p.Ub(),p.Bc(10," Add Exercise "),p.Ub(),p.Ub(),p.Vb(11,"div",6),p.Vb(12,"table",7),p.Tb(13,8),p.Ac(14,A,2,0,"th",9),p.Ac(15,E,2,1,"td",10),p.Sb(),p.Tb(16,11),p.Ac(17,j,2,0,"th",9),p.Ac(18,N,2,1,"td",10),p.Sb(),p.Tb(19,12),p.Ac(20,R,2,0,"th",9),p.Ac(21,L,4,0,"td",10),p.Sb(),p.Tb(22,13),p.Ac(23,Q,2,0,"th",9),p.Ac(24,W,4,0,"td",10),p.Sb(),p.Tb(25,14),p.Ac(26,$,2,0,"th",9),p.Ac(27,q,4,0,"td",10),p.Sb(),p.Ac(28,z,1,0,"tr",15),p.Ac(29,G,1,0,"tr",16),p.Ub(),p.Qb(30,"mat-paginator",17),p.Ub()),2&t&&(p.Db(4),p.lc("formControl",e.selectedItem),p.Db(8),p.lc("dataSource",e.dataSource),p.Db(16),p.lc("matHeaderRowDef",e.displayedColumns),p.Db(1),p.lc("matRowDefColumns",e.displayedColumns),p.Db(1),p.lc("pageSizeOptions",p.nc(5,J)))},directives:[C.b,C.f,y.b,a.b,a.n,a.f,O.a,C.g,D.a,r.j,r.c,r.e,r.b,r.g,r.i,s.a,r.d,r.a,r.f,r.h],styles:["table[_ngcontent-%COMP%]{width:100%}"]}),t})()}];let X=(()=>{class t{}return t.\u0275mod=p.Nb({type:t}),t.\u0275inj=p.Mb({factory:function(e){return new(e||t)},imports:[[n.c.forChild(H)],n.c]}),t})();var K=i("hGdz");let Y=(()=>{class t{}return t.\u0275mod=p.Nb({type:t}),t.\u0275inj=p.Mb({factory:function(e){return new(e||t)},imports:[[o.c,X,K.a]]}),t})()}}]);